<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>storiesbyjez - Wave Lines</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        
        body {
            font-family: 'Courier New', Courier, monospace;
            min-height: 100vh;
            background: #1a0a0f;
            color: #f0e0e5;
            overflow-x: hidden;
        }
        
        #ripple-canvas {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 0;
            cursor: pointer;
        }
        
        .content-wrapper {
            position: relative;
            z-index: 1;
            pointer-events: none;
        }
        
        .content-wrapper > * {
            pointer-events: auto;
        }
        
        .header {
            padding: 20px 40px;
            border-bottom: 1px solid #4a1a2a;
            display: flex;
            justify-content: space-between;
            align-items: center;
            background: rgba(26, 10, 15, 0.9);
        }
        
        h1 {
            font-size: 28px;
            font-weight: 300;
            letter-spacing: 4px;
            color: #ff3344;
            text-shadow: 0 0 20px rgba(255, 51, 68, 0.3);
        }
        
        .tagline {
            font-size: 11px;
            letter-spacing: 2px;
            color: #8a5a6a;
            text-transform: uppercase;
        }
        
        .effect-info {
            max-width: 600px;
            margin: 60px auto;
            padding: 2rem;
            background: rgba(10, 5, 8, 0.8);
            border: 1px solid #4a1a2a;
            text-align: center;
        }
        
        .effect-info h3 { color: #ff3344; margin-bottom: 1rem; }
        .effect-info p { color: #8a5a6a; font-size: 0.95rem; line-height: 1.6; }
        
        footer {
            position: fixed;
            bottom: 0;
            width: 100%;
            text-align: center;
            padding: 1.5rem;
            background: rgba(26, 10, 15, 0.9);
        }
        
        .powered { color: #8a5a6a; font-size: 0.9rem; }
        .powered a { color: #d0b0c0; text-decoration: none; }
        .powered a:hover { color: #ff3344; }
    </style>
</head>
<body>
    <canvas id="ripple-canvas"></canvas>
    
    <div class="content-wrapper">
        <header class="header">
            <div>
                <h1>storiesbyjez</h1>
                <p class="tagline">after dark audio // where romance deepens</p>
            </div>
        </header>
        
        <div class="effect-info">
            <h3>▶ Wave Line Effect</h3>
            <p>
                <strong>2 horizontal waves</strong> flow constantly.<br>
                <strong>Click creates expanding ring</strong> (multicolor).<br>
                Ring cancels waves on collision.
            </p>
        </div>
        
        <footer>
            <p class="powered">powered by <a href="https://lempyra.com">Lempyrλ</a></p>
        </footer>
    </div>
    
    <script>
        const canvas = document.getElementById('ripple-canvas');
        const ctx = canvas.getContext('2d');
        
        let hexGrid = [];
        let activeRings = [];
        let wavePhase1 = 0;
        let wavePhase2 = Math.PI;
        
        const hexSize = 30;
        const hexHeight = 35;
        
        function resizeCanvas() {
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
            createHexGrid();
        }
        
        function createHexGrid() {
            hexGrid = [];
            const cols = Math.ceil(canvas.width / (hexSize * 0.75)) + 2;
            const rows = Math.ceil(canvas.height / hexHeight) + 2;
            
            for (let row = 0; row < rows; row++) {
                for (let col = 0; col < cols; col++) {
                    const x = col * hexSize * 0.75;
                    const y = row * hexHeight + (col % 2) * (hexHeight / 2);
                    hexGrid.push({ x, y, scale: 1, color: '#4a1a2a', brightness: 0 });
                }
            }
        }
        
        function drawHex(x, y, scale, color, brightness) {
            ctx.save();
            ctx.translate(x, y);
            ctx.scale(scale, scale);
            
            ctx.beginPath();
            for (let i = 0; i < 6; i++) {
                const angle = (Math.PI / 3) * i;
                const hx = Math.cos(angle) * 15;
                const hy = Math.sin(angle) * 17;
                i === 0 ? ctx.moveTo(hx, hy) : ctx.lineTo(hx, hy);
            }
            ctx.closePath();
            
            ctx.strokeStyle = color;
            ctx.lineWidth = 1 + brightness * 2;
            if (brightness > 0.1) {
                ctx.shadowBlur = 10 * brightness;
                ctx.shadowColor = color;
            }
            ctx.stroke();
            ctx.restore();
        }
        
        function animate() {
            ctx.fillStyle = '#1a0a0f';
            ctx.fillRect(0, 0, canvas.width, canvas.height);
            
            wavePhase1 += 0.03;
            wavePhase2 += 0.03;
            
            const wave1Y = canvas.height * 0.33;
            const wave2Y = canvas.height * 0.66;
            
            hexGrid.forEach(hex => {
                let inWave = false;
                let waveIntensity = 0;
                
                // Check wave 1
                const dist1 = Math.abs(hex.y - wave1Y);
                if (dist1 < 40) {
                    const wave = Math.sin(hex.x * 0.02 + wavePhase1);
                    if (Math.abs(wave * 30 - (hex.y - wave1Y)) < 30) {
                        inWave = true;
                        waveIntensity = Math.max(waveIntensity, 1 - dist1 / 40);
                    }
                }
                
                // Check wave 2
                const dist2 = Math.abs(hex.y - wave2Y);
                if (dist2 < 40) {
                    const wave = Math.sin(hex.x * 0.02 + wavePhase2);
                    if (Math.abs(wave * 30 - (hex.y - wave2Y)) < 30) {
                        inWave = true;
                        waveIntensity = Math.max(waveIntensity, 1 - dist2 / 40);
                    }
                }
                
                // Check if cancelled by ring
                let cancelled = false;
                activeRings.forEach(ring => {
                    const dx = hex.x - ring.x;
                    const dy = hex.y - ring.y;
                    const dist = Math.sqrt(dx * dx + dy * dy);
                    if (Math.abs(dist - ring.radius) < 40) {
                        cancelled = true;
                    }
                });
                
                if (cancelled) {
                    // Draw with ring color (set by ring function)
                    drawHex(hex.x, hex.y, hex.scale, hex.color, hex.brightness);
                } else if (inWave) {
                    // Draw wave
                    drawHex(hex.x, hex.y, 1 + waveIntensity * 0.15, '#ff3344', waveIntensity * 0.5);
                } else {
                    // Draw normal
                    drawHex(hex.x, hex.y, 1, '#4a1a2a', 0);
                }
            });
            
            // Update rings
            activeRings = activeRings.filter(ring => {
                ring.radius += 4;
                return ring.radius < 300;
            });
            
            requestAnimationFrame(animate);
        }
        
        canvas.addEventListener('click', (e) => {
            const colors = ['#ff3344', '#ff5566', '#ff1122', '#dd2244'];
            const ring = { x: e.clientX, y: e.clientY, radius: 0 };
            activeRings.push(ring);
            
            function expandRing() {
                hexGrid.forEach(hex => {
                    const dx = hex.x - ring.x;
                    const dy = hex.y - ring.y;
                    const dist = Math.sqrt(dx * dx + dy * dy);
                    
                    if (Math.abs(dist - ring.radius) < 40) {
                        hex.scale = 1.5;
                        hex.color = colors[Math.floor(Math.random() * colors.length)];
                        hex.brightness = 1;
                        
                        setTimeout(() => {
                            hex.scale = 1;
                            hex.color = '#4a1a2a';
                            hex.brightness = 0;
                        }, 500);
                    }
                });
                
                if (ring.radius < 300) {
                    setTimeout(expandRing, 16);
                }
            }
            expandRing();
        });
        
        canvas.addEventListener('touchstart', (e) => {
            e.preventDefault();
            const touch = e.touches[0];
            canvas.dispatchEvent(new MouseEvent('click', {
                clientX: touch.clientX,
                clientY: touch.clientY
            }));
        });
        
        window.addEventListener('resize', resizeCanvas);
        resizeCanvas();
        animate();
    </script>
</body>
</html>
